"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const plugin_1 = require("../../plugin");
const theme_gitbook_1 = require("../theme.gitbook");
const theme_vuepress_1 = require("../theme.vuepress");
const relative_url_1 = require("./relative-url");
function breadcrumbs() {
    if (!isVisible()) {
        return '';
    }
    const mode = plugin_1.MarkdownPlugin.settings.mode;
    const hasGlobalsFile = plugin_1.MarkdownPlugin.theme.hasGlobalsFile;
    const md = mode === undefined || mode === 1 || hasGlobalsFile ? [`[Globals](${relative_url_1.relativeUrl(this.project.url)}) /`] : [];
    return breadcrumb(this.model, md);
}
exports.breadcrumbs = breadcrumbs;
function breadcrumb(model, md) {
    if (model && model.parent) {
        breadcrumb(model.parent, md);
        if (model.url) {
            md.push(`[${model.name}](${relative_url_1.relativeUrl(model.url)}) /`);
        }
    }
    return md.join(' ');
}
function isVisible() {
    if (plugin_1.MarkdownPlugin.theme instanceof theme_gitbook_1.GitbookTheme || plugin_1.MarkdownPlugin.theme instanceof theme_vuepress_1.VuePressTheme) {
        return false;
    }
    return true;
}
